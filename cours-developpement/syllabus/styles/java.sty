\definecolor{javared}{rgb}{0.6,0,0} % for strings
\definecolor{javagreen}{rgb}{0.25,0.5,0.35} % comments
\definecolor{javapurple}{rgb}{0.5,0,0.35} % keywords
\definecolor{javadocblue}{rgb}{0.25,0.35,0.75} % javadoc
\definecolor{solarizedyellow}{HTML}{b58900}
 
%morecomment=[s][\color{javadocblue}]{/**}{*/},
%numbers=left,
%numberstyle=\tiny\color{black},
%stepnumber=2,
%numbersep=3pt,

%\@ifpackageloaded{monbeaupackage}{}{\usepackage{monbeaupackage}}
\@ifpackageloaded{tcolorbox}{}{\usepackage[most,listings]{tcolorbox}}
\@ifpackageloaded{environ}{}{\usepackage{environ}}
\tcbuselibrary{listingsutf8}

\newtcblisting{java}{
	colback=gray!25,
	colframe=gray!75,
	listing only,
	listing options={
		style=tcblatex,
		language=java,
		tabsize=2,
		keywordstyle=\color{javapurple}\bfseries,
		stringstyle=\color{javared},
		commentstyle=\color{javagreen},
		numbers=left,
		numberstyle=\tiny\color{solarizedyellow},
		stepnumber=3,
		numbersep=4pt,
	},
    sharp corners=northwest,
    leftrule=.6em,
    enhanced,
    title=java,
    coltitle=red,
    fonttitle=\bfseries,
	attach boxed title to bottom right={yshift=5mm, xshift=-7mm},
	boxed title style={colback=white},
}

% usage
%
%\begin{grammaire}
%	if ( \grammarrule{Expression} ) \grammarrule{Statement}
%\end{grammaire}
%
% pour les tabulations, utiliser des espaces
%

\newcommand{\grammarrule}[1]{\textrm{\textit{#1}}}

\@ifpackageloaded{alltt}{}{\usepackage{alltt}}
\newenvironment{grammaire}
{%
	\begin{flushleft}
	\begin{tcolorbox}[blanker,
			borderline west={3pt}{0pt}{gray!10},
			top=1em,
			bottom=1em,
			left=1em,
                 ]
	\begin{minipage}{0.97\linewidth}
    \begin{alltt}
    \large
}{%
	\end{alltt}
	\end{minipage}
	\end{tcolorbox}
	\end{flushleft}
}
