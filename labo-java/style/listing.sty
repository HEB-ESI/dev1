% ================================================
%  Permet d'ajouter d'inclure du code mis en page
%  Ex: \listing{XML}{code/brol.xml}
% ================================================

% Pour du reproduire du code.
% http://www.ctan.org/pkg/listings
% -------------------------------------------------------------
\usepackage{listings}
\lstdefinestyle{lstverb}
  {
	% accepter les accents
	% OK avec listing inclus mais difficile si inline
	% OK avec le truc de literate
    extendedchars=true,
    inputencoding=utf8,
    literate={é}{{\'e}}1 {è}{{\`e}}1 {ê}{{\^e}}1 {à}{{\`a}}1 {â}{{\^a}}1,
	% cadre, couleurs et taille
    basicstyle=\footnotesize,
    backgroundcolor=\color[gray]{.95},
    frameround=tttt, frame=trbl, framerule=0pt, rulecolor=\color{gray},
    % numérotation
    numbers=left, numberstyle=\tiny, stepnumber=1, numbersep=8pt,
    % divers
    flexiblecolumns, 	% lié à l'alignement des indentations 
    escapechar=~,		% Permet d'insérer du code Latex interprété
						% ex; ~\textbf{texte à mettre en évidence}~
    tabsize=4,
    showstringspaces=false	% Pas de mise en évidence des espaces dans les chaines.
  }
\lstnewenvironment{Java}[1][]{\lstset{style=lstverb,language=java,#1}}{}
\lstnewenvironment{HTML}[1][]{\lstset{style=lstverb,language=HTML,#1}}{}
\lstnewenvironment{XML}[1][]{\lstset{style=lstverb,language=XML,#1}}{}
\lstnewenvironment{Code}[1][]{\lstset{style=lstverb,#1}}{}
\newcommand{\listing}[3][lastline=240]{%
	\par\hfill{\footnotesize{\color{gray}#3}\noindent}%
	\vspace{-0.3\baselineskip}%
	\lstinputlisting[style=lstverb,language=#2,#1]{#3}%
}
