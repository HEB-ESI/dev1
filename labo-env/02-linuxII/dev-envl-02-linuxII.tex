\documentclass[a4paper,11pt]{style-esi/td}

\usepackage{style-esi/licence}
\usepackage{style-esi/exercice}
\usepackage{style-esi/exemple}
\usepackage{style-esi/question}
\usepackage{style-esi/tutoriel}
\usepackage{style-esi/listing}
\usepackage{style-esi/images}
\usepackage{style-dev1/dev1}

\begin{document}

\seance{2}{Introduction (partie II)}
\entete
\titre
\ccbysa{esi-dev1-list@he2b.be}
\lastedit

\bigskip
\tableofcontents

\newpage

%====================
\section{Le système de fichiers}
%=====================

    %==================================
	\subsection{La racine du système de fichiers}
	%==================================

		Rappelez-vous que les fichiers sont organisés en hiérarchie :
		un dossier contient d'autres dossiers qui lui-même\dots

		On a vu que chaque utilisateur dispose d'un dossier personnel. 
		Où se trouve-il ? Dans un dossier appelé \samp{home}. 
		Et où se trouve ce dossier \samp{home} ? 
		Dans un dossier appelé \og{}\samp{/}\fg{} (la barre oblique). 
		Et où se trouve ce dossier \og{}\samp{/}\fg{} ? Nulle part ;) 
		C'est le dossier principal (la \textbf{racine}).

		\begin{theorie}{La racine du système de fichiers}
			La \textbf{racine} est le dossier principal, 
			tout en haut de la hiérarchie des dossiers.
		\end{theorie}

	%==================================
	\subsection{Chemin absolu et relatif}
	%==================================

		\exergue{Tout est relatif, et cela seul est absolu.}{Auguste Comte}
		
		\bigskip
		Régulièrement, il faut indiquer un endroit du système de fichiers 
		(par exemple pour y aller). 
		Désigner simplement le nom du dossier ne suffit pas.  
		Nous avons déjà abordé la notion de \emph{chemin}; Précisons.

		\begin{theorie}{Chemin absolu et relatif}
			\begin{description}
			\item[Chemin]
				Un \textbf{chemin} est une suite de dossiers à traverser 
				pour arriver au dossier ou au fichier qui nous intéresse.
				On les sépare par \og{}\samp{/}\fg{}.

				Par exemple : \samp{home/g12345/dev1/td1/test}
				indique que dans le dossier \samp{home}
				il y a un dossier \samp{g12345}
				qui contient un dossier \samp{dev1} 
				qui contient un dossier \samp{td1} 
				qui contient un fichier (ou un dossier) \samp{test}.
			\item[Chemin absolu]
				Un chemin est \textbf{absolu} 
				s'il commence à partir de la \textbf{racine}.
				Il commence donc par \og{}\samp{/}\fg{}.
				Par exemple : \samp{/home/g12345/td1/test}
			\item[Chemin absolu]
				Dans le cas contraire il est \textbf{relatif}.
				Il s'agit d'un chemin à suivre à partir du \textbf{dossier courant}.
			\end{description}
		\end{theorie}

		\begin{alertbox}
			Un chemin \textbf{absolu} désigne toujours le même endroit.
			Un chemin \textbf{relatif} non ! \c ca dépend d'où on est,
			du dossier courant.
		\end{alertbox}

		\begin{Exercice}{pwd}
			Entrez la commande \kbd{pwd} (que fait-elle encore ?). 
			Comprenez-vous la notation qu'elle utilise pour la réponse ?
			Est-ce une chemin absolu ou relatif ?
		\end{Exercice}

		\begin{infobox}
			Rappel : dans une commande, un nom de fichier (ou de dossier)
			désigne toujours un fichier (ou un dossier) se trouvant
			dans le dossier courant
	
			Pour indiquer un \textbf{fichier} (ou un dossier) 
			se trouvant \textbf{ailleurs},
			il faut donner son \textbf{chemin} (absolu ou relatif).
		\end{infobox}

		Par exemple : \kbd{ls /home/g12345}
		permet de visualiser le contenu de la home de \samp{g12345}
		(quel que soit l'endroit où on se trouve puisque c'est un chemin absolu).
		
		\begin{Exercice}{Utilisation d'un chemin}
			Supposons que vous êtes dans votre home 
			et que vous ne pouvez pas vous déplacer 
			(la commande \samp{cd} est interdite !).
			\begin{enumerate}
			\item 
				Affichez le contenu du fichier \samp{test}
				(qui se trouve dans le dossier \samp{td1})
				en utilisant un chemin \textbf{relatif}.
			\item 
				Faites la même chose 
				en utilisant un chemin \textbf{absolu}.
			\item
				Créez une copie du fichier \samp{welcome} 
				dans le dossier \samp{td1}.
			\item 
				Auriez-vous pu faire cette copie 
				sans utiliser de chemin,
				en vous déplaçant (\samp{cd}) ?
			\end{enumerate}
		\end{Exercice}

	%==================================
	\subsection{Raccourcis pour des chemins}
	%==================================

		\begin{theorie}{Raccourcis}
			Dans un chemin :
			\begin{itemize}
			\item \samp{\textasciitilde{}g12345} : désigne la home de l'utilisateur \samp{g12345} ;
			\item \samp{\textasciitilde{}} : désigne la home de l'utilisateur qui entre la commande ;
			\item \samp{..} : désigne le dossier parent du dossier courant ;
			\item \samp{.} : désigne le dossier courant.
			\end{itemize}
		\end{theorie}

		\begin{Exercice}{Se familiariser avec les raccourcis}
			Placez-vous dans votre dossier personnel.
			En utilisant les raccourcis 
			afin de trouver la solution la plus courte possible :
			\begin{enumerate}
			\item Affichez le contenu de votre dossier personnel
				en utilisant un chemin absolu.
			\item Affichez le contenu de la home de votre professeur
				en utilisant un chemin absolu.
			\item Refaites la même chose mais en utilisant un chemin relatif.
			\end{enumerate}
		\end{Exercice}

		\begin{Exercice}{Comprendre un chemin}
			Que désigne le chemin suivant :
			\samp{\textasciitilde{}mcd/../../home} ?
		\end{Exercice}

		\begin{Exercice}{Chemins absolus et relatifs}
			Parmi tous les chemins suivants, quels sont ceux qui sont 
			\textbf{relatifs} ?			
			\begin{selectmany} 
			\item \verb@~/../g12345/td2@
			\item \verb@/home/g12345/../g54321/Hello.java@
			\item \verb@./tds/td2@
			\item \verb@tds/td2/Hello.java@
			\item \verb@~g12345/tds/td2@
			\end{selectmany} 
        \end{Exercice}

%====================
\section{La ligne de commandes}
%=====================

	%====================
	\subsection{Compléter une commande}
	%====================

		Parfois, vous devez entrer une commande assez longue 
		parce que les noms de fichiers sont longs et/ou nombreux.
		Linux offre plusieurs facilités pour simplifier l'entrée de longues commandes.  

		\begin{Experience}{La complétion de la commande} 
			Supposons que vous ne vous rappeliez plus très bien 
			de la commande qui permet de modifier le mot de passe.
			Vous vous rappelez juste qu'elle commence par \verb|pas|.
			\begin{steps}
			\item 
				Tapez \kbd{pas} sans appuyer sur \samp{ENTER}.
			\item 
				Appuyez $2\times$ sur la touche \samp{TAB}.
				Le shell affiche la liste des commandes commençant ainsi.
			\item 
				Tapez sur \kbd{s} puis à nouveau $2\times$ sur la touche \samp{TAB}.
				Comme il n'y a plus qu'une seule possibilité, le shell complète la commande.
			\end{steps}  
		\end{Experience}		

		\begin{Exercice}{La complétion des noms de fichiers} 
			La touche de tabulation permet également de compléter un nom de fichier. 
			\begin{enumerate}
  			\item Copiez chez vous le fichier\par
	  			\verb@monfichieraunomtellementlongquilmeparaitpeuprobabledeletaper2xsanserreur@ 
	  			qui se trouve dans le dossier \verb@/eCours/java/td/td3@.
			\item Affichez le contenu de ce fichier en évitant de retaper son nom.
			\end{enumerate}
		\end{Exercice}	

	%====================
	\subsection{Les jokers}
	%====================

		TODO (motivation, expérience, exercice\dots)

		\begin{theorie}{Les jokers}
			Dans un nom de fichier/dossier
			\begin{itemize}
				\item \og{}\samp{?}\fg{} remplace \textbf{un et un seul} caractère quelconque.
				\item \og{}\samp{*}\fg{} remplace \textbf{0, 1 ou plusieurs} caractères quelconques.
			\end{itemize}
		\end{theorie}

	%====================
	\subsection{Historique}
	%====================

		Il arrive souvent qu'on oublie une commande qu'on a déjà utilisée avant.
		Linux retient un historique des commandes tapées par un utilisateur
		et il est possible de l'exploiter.
		
		\begin{theorie}{Historique}
			\begin{itemize}
			\item 
				Les flèches \emph{haut} et \emph{bas}
				permettent de se déplacer dans les commandes déjà entrées.
			\item 
				\kbd{history} affiche la liste (numérotée)
				des dernières commandes tapées.
			\item 
				\kbd{!n} réexécute la commande numéro \emph{n}.
			\item 
				\kbd{!mot} réexécute la commande la plus récente 
				\textbf{commençant} par \emph{mot}.
			\item 
				\kbd{!?mot} réexécute la commande la plus récente 
				\textbf{contenant} par \emph{mot}.
			\item 
				\kbd{\^{}chaine1\^{}chaine2\^{}} réexécute la dernière commande
				en remplaçant \emph{chaine1} par \emph{chaine2}.
			\end{itemize}
		\end{theorie}
				
	%====================
	\subsection{Les options}
	%=====================
	
		La plupart des commandes possèdent des \textbf{options}.

		\begin{theorie}{Les options}
			Une \textbf{option modifie le sens} d'une commande ;
			\begin{itemize}
			\item Elle commence par le signe \texttt{-} suivi d'une seule lettre ;
			\item ou encore par le double tiret \texttt{-{}-} suivi d'un nom d'option.
			\item Elle est placée n'importe où après le nom de la commande.   
			\end{itemize}
		\end{theorie}		

		\begin{Experience}{Expérimenter les options}		
			\vspace{-1em}
			\begin{steps}
			\item Tapez la commande \kbd{ls -l}. 
				Vous constatez que le résultat obtenu est beaucoup plus verbeux 
				que celui obtenu sans l'option.
			\item Placez vous dans le dossier \samp{td1} et 
				tapez la commande \kbd{cat -n test}. 
				L'option demande de numéroter les lignes 
			\item Essayez \kbd{cat -{}-number test},
				la version \textit{longue} équivalente à la précédente.
			\end{steps}
		\end{Experience}

%====================
\section{Se documenter}
%=====================

	%====================
	\subsection{Recherche d'informations}  
	%====================

		Non seulement, il y a beaucoup de commandes à connaitre mais, en plus, 
		chacune dispose d'une multitude d'options. 
		Impossible de tout retenir ! Comment faire ?   

		\begin{theorie}{Information}
			\begin{itemize}
			\item 
				\kbd{nomCommande -{}-help}
				affiche une aide succincte sur la commande.
			\item 
				\kbd{man nomCommande} affiche une documentation plus complète.
				(\textit{q} pour quitter).
			\end{itemize}
		\end{theorie}

		Si vous ne connaissez pas le nom de la commande,
		consultez les documents que l'on met à votre disposition,
		notamment le \textit{Linux Cheat Sheet}.  

		\begin{Exercice}{Trouver la bonne option} 
			La commande \kbd{ls -l} 
			affiche le contenu du dossier en format \textit{long}.
			La 5\ieme{} colonne donne la taille du fichier (en octets).
			Lorsque les nombres sont grands, ce n'est pas très lisible. 
			Trouvez l'option qui permet d'afficher cette taille sous un format plus lisible.  
			
			\begin{alertbox} 
				De grâce, \textbf{cherchez} la réponse, 
				ne la \textbf{demandez pas} à votre voisin. 
				Le but de cet exercice n'est pas de connaitre l'option 
				(elle n'est pas si utile que \c ca) 
				mais d'apprendre à trouver soi-même l'information.  
			\end{alertbox}
		\end{Exercice}

		\begin{Exercice}{Trouver la bonne commande}
			Quelle commande permet de 
			\begin{itemize}
				\item \textit{nettoyer} l'écran ?  
				\item afficher la date et l'heure ?
			\end{itemize}
		\end{Exercice}




%===================
\section{Conclusion}
%====================

	\begin{theorie}{Notions importantes de ce TD}
		Voici les notions importantes que vous devez avoir assimilées à la fin de ce TD.
		\begin{itemize}
		\item 
			Comprendre la notion de chemin absolu et relatif.
			Savoir les utiliser dans les commandes.
		\item 
			Connaitre la signification dans un chemin de : 
			\og{}\samp{\textasciitilde}\fg{},
			\og{}\samp{.}\fg{} et \og{}\samp{..}\fg{}.
		\item 
			Pouvoir demander plus d'informations sur une commande, ses options.
			Comprendre les informations fournies.
		% \item 
		% 	La notion de propriétaire de fichier et la notion de groupe.
		% \item 
		% 	Pourvoir interpréter le résultat de la commande \kbd{ls -l}. 
		% \item 
		% 	Comprendre que les permissions sont données à 3 catégories de personnes
		% 	et comprendre ce que ces catégories signifient.
		% \item 
		% 	Comprendre les 3 sortes de permissions pour un fichier et pour un dossier.
		% \item 
		% 	Pourvoir modifier le groupe et les permissions
		% 	(avec des nombres et avec des lettres).
		\end{itemize}
	\end{theorie}

	\begin{Exercice}{Exercice récapitulatif}
		TODO\dots
	\end{Exercice}

	\bigskip
	\begin{infotbox}{Félicitations !} 
		Vous êtes arrivé au bout de ce premier TD.
		Avant de quitter le laboratoire, n'oubliez pas de quitter proprement 
		la connexion avec \samp{linux1} (\kbd{exit}) 
		et d'éteindre l'ordinateur (ou au moins de vous déloguer).

		À la semaine prochaine et soyez à l'heure !
	\end{infotbox}

\end{document}

	
